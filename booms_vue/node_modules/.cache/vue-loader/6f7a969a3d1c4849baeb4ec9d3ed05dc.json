{"remainingRequest":"/Users/zhaoyonghui/Boom/Boom/boom_vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhaoyonghui/Boom/Boom/boom_vue/src/views/Jk/addcase.vue?vue&type=style&index=0&id=b3ef2686&scoped=true&lang=css&","dependencies":[{"path":"/Users/zhaoyonghui/Boom/Boom/boom_vue/src/views/Jk/addcase.vue","mtime":1611665447880},{"path":"/Users/zhaoyonghui/Boom/Boom/boom_vue/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoyonghui/Boom/Boom/boom_vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhaoyonghui/Boom/Boom/boom_vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhaoyonghui/Boom/Boom/boom_vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhaoyonghui/Boom/Boom/boom_vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLmNhc2UgewogIG1hcmdpbi10b3A6IDIwcHg7Cn0KLmFkZGN1cmxidG4gewogIG1hcmdpbi10b3A6IDEwcHg7CiAgcmlnaHQ6IDA7Cn0KLnBhcmFtZGF0YWRpdiB7CiAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogIG1hcmdpbi10b3A6IDVweDsKfQouZGl2aW5wdXQgewogIHdpZHRoOiAzNTBweDsKfQouZGl2aW5wdXRzIHsKICBtYXJnaW4tbGVmdDogMTBweDsKICB3aWR0aDogMzUwcHg7Cn0KLmJ0bjIgewogIG1hcmdpbi1sZWZ0OiAxMHB4Owp9Ci5lbC1mb3JtLWl0ZW1fX2NvbnRlbnQgewogIGRpc3BsYXk6IGlubGluZS1ibG9jazsKfQo="},{"version":3,"sources":["addcase.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"addcase.vue","sourceRoot":"src/views/Jk","sourcesContent":["<template>\n  <div>\n    <!-- ------------------------------------------顶部按钮------------------------------------------------------------- -->\n    <div>\n      <el-button type=\"primary\" @click=\"curladd\">Curl导入</el-button>\n    </div>\n\n    <!-- -----------------------------------------模态框------------------------------------------------------------- -->\n\n    <el-dialog title=\"Curl导入\" :visible.sync=\"dialogFormVisible\">\n      <el-input\n        type=\"textarea\"\n        :rows=\"10\"\n        placeholder=\"请输入内容\"\n        v-model=\"textarea\"\n      >\n      </el-input>\n      <el-button type=\"primary\" @click=\"addcurl\" class=\"addcurlbtn\"\n        >提交</el-button\n      >\n    </el-dialog>\n\n    <!-- ------------------------------------------添加用例模块------------------------------------------------------------- -->\n    <div class=\"case\">\n      <el-form :model=\"form\">\n        <el-form-item label=\"\b用例名称\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"URL\" :label-width=\"formLabelWidth\">\n          <el-input v-model=\"form.url\" autocomplete=\"off\"></el-input>\n        </el-form-item>\n\n        <el-form-item label=\"请求头\" :label-width=\"formLabelWidth\">\n          <div\n            class=\"paramdatadiv\"\n            v-for=\"(item, i) in form.head\"\n            :key=\"item.id\"\n          >\n            <el-input class=\"divinput\" v-model=\"item.head_key\"></el-input>\n            <el-input class=\"divinputs\" v-model=\"item.head_val\"></el-input>\n            <el-button\n              class=\"btn2\"\n              type=\"danger\"\n              @click=\"del_head(item.head_key)\"\n              v-show=\"!(form.head.length == i + 1)\"\n              >删除</el-button\n            >\n            <el-button\n              class=\"btn2\"\n              type=\"primary\"\n              @click=\"add_head\"\n              v-show=\"form.head.length == i + 1\"\n              >添加</el-button\n            >\n          </div>\n        </el-form-item>\n\n        <el-form-item label=\"方法\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"form.method\" placeholder=\"请求方法\">\n            <el-option label=\"POST\" value=\"POST\"></el-option>\n            <el-option label=\"GET\" value=\"GET\"></el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"标签\" :label-width=\"formLabelWidth\">\n          <el-select v-model=\"form.tag\" filterable multiple placeholder=\"请选择\">\n            <el-option\n              v-for=\"item in tableData\"\n              :key=\"item.id\"\n              :label=\"item.tagname\"\n              :value=\"item.tagname\"\n            >\n            </el-option>\n          </el-select>\n        </el-form-item>\n\n        <el-form-item label=\"参数\" :label-width=\"formLabelWidth\">\n          <div\n            class=\"paramdatadiv\"\n            v-for=\"(item, i) in form.data\"\n            :key=\"item.id\"\n          >\n            <el-input class=\"divinput\" v-model=\"item.keys\"></el-input>\n            <el-input class=\"divinputs\" v-model=\"item.val\"></el-input>\n            <el-button\n              class=\"btn2\"\n              type=\"danger\"\n              @click=\"add_div\"\n              v-show=\"!(form.data.length == i + 1)\"\n              >删除</el-button\n            >\n            <el-button\n              class=\"btn2\"\n              type=\"primary\"\n              @click=\"add_div\"\n              v-show=\"form.data.length == i + 1\"\n              >添加</el-button\n            >\n          </div>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button type=\"primary\" @click=\"updata\">确 定</el-button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { apitag, addtag, updataApi, jks } from \"../../api/apijk.js\";\n\nexport default {\n    created(){\n        this.gettag()\n    }, \n  data() {\n    return {\n      param: [2],\n      paramkey: \"\",\n      paramvalues: \"\",\n      form: {\n        head: [{ head_key: \"\", head_val: \"\" }],\n        data: [{ keys: \"\", val: \"\" }],\n        tag:\"\"\n      },\n      textarea: \"\",\n      dialogFormVisible: false,\n      formLabelWidth: \"120px\",\n      tableData:[]\n    };\n  },\n  methods: {\n    curladd() {\n      this.textarea = \"\";\n      this.dialogFormVisible = true;\n    },\n    add_div() {\n      this.form.data.push({ keys: \"\", val: \"\" });\n    },\n    updata(){\n      var user = localStorage.getItem(\"user\")\n      console.log(this.user)\n      jks(this.form,user).then(res=>{\n          console.log(111)\n      })\n    },\n    add_head() {\n      this.form.head.push({ keys: \"\", val: \"\" });\n    },\n\n    //curl 获取内容到指定位置\n    addcurl() {\n      console.log(this.textarea);\n      var str = this.textarea.split(\" \");\n      console.log(str);\n      var head_curl = [];\n      for (var i in str) {\n        let h = {};\n        // console.log(str[i])\n        if (str[i] == \"-H\") {\n          console.log(str[parseInt(i) + 1]);\n          let values = \"\";\n          console.log(str[parseInt(i) + 2]);\n          for (var j = 0; j < 10000; j++) {\n            if (\n              str[parseInt(i) + 2 + j] != \"-H\" &&\n              str[parseInt(i) + 2 + j] != \"--data\" &&\n              str[parseInt(i) + 2 + j] != \"--compressed\"\n            ) {\n              values = values + str[parseInt(i) + 2 + j];\n            } else {\n              break;\n            }\n          }\n          //   head[str[parseInt(i) + 1].replace(\":\", \"\")] = values;\n          h[\"head_key\"] = str[parseInt(i) + 1]\n            .replace(\":\", \"\")\n            .replace(\"'\", \"\");\n          h[\"head_val\"] = values.replace(\"'\", \"\");\n          head_curl.push(h);\n        } else {\n          if (str[i] == \"--compressed\") {\n            this.form.url = str[parseInt(i) + 1]\n              .replace(\"'\", \"\")\n              .replace(\"'\", \"\");\n          } else {\n            if (str[i] == \"--data\") {\n              var a = str[parseInt(i) + 1].replace('\"', \"\").replace('\"', \"\");\n              var c = a.split(\"&\");\n              console.log(c);\n              var curldata = [];\n              for (var k in c) {\n                let curld = {};\n                var s = c[k].split(\"=\");\n                curld[\"keys\"] = s[0];\n                curld[\"val\"] = s[1];\n                curldata.push(curld);\n              }\n              this.form.data = curldata;\n            }\n          }\n        }\n      }\n      this.form.head = head_curl;\n      this.dialogFormVisible = false;\n    },\n    //获取标签 内容\n    gettag() {\n      apitag().then((res) => {\n          console.log(res.data.res)\n        this.tableData = res.data.res;\n      });\n    },\n    del_head(res){\n      console.log(res)\n      for(var i in this.form.head){\n        if(res==this.form.head[i][\"head_key\"]){\n          console.log(this.form.head[i])\n          console.log(i)\n          this.form.head.splice(i,1)\n        }\n      }\n    }\n  },\n};\n</script>\n\n<style scoped>\n.case {\n  margin-top: 20px;\n}\n.addcurlbtn {\n  margin-top: 10px;\n  right: 0;\n}\n.paramdatadiv {\n  display: inline-block;\n  margin-top: 5px;\n}\n.divinput {\n  width: 350px;\n}\n.divinputs {\n  margin-left: 10px;\n  width: 350px;\n}\n.btn2 {\n  margin-left: 10px;\n}\n.el-form-item__content {\n  display: inline-block;\n}\n</style>"]}]}